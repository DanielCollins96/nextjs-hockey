{"version":3,"file":"../pages/api/players.js","mappings":"qcAAAA,EAAAC,OAAA,CAAAC,QAAA,6BCAAF,EAAAC,OAAA,CAAAC,QAAA,2ECUAC,OAAAC,cAAA,CAAAH,EAAA,IAAwC,CACxCI,WAAA,GACAC,IAAA,WACA,OAGA,SAAAC,EAAAP,CAAA,CAAAQ,CAAA,SAEA,KAAAR,EACAA,CAAA,CAAAQ,EAAA,CAIA,SAAAR,GAAA,mBAAAA,EAAAS,IAAA,CACAT,EAAAS,IAAA,IAAAF,EAAAG,EAAAF,IAIA,mBAAAR,GAAAQ,YAAAA,EACAR,QAIA,CAnBA,CACA,wBEEIW,sNDfW,eAAuBC,CAAG,CAAEC,CAAG,EAC9CC,QAAQC,GAAG,CAAC,qBACZ,GAAI,CAEA,IAAMC,EAAM;;;;;;;;;IASZ,CAAC,CACGC,EAAS,MAAMC,EAAAA,CAAAA,CAAKC,KAAK,CAACH,GAC9BC,EAASA,EAAOG,IAAI,CACpBP,EAAIQ,MAAM,CAAC,KAAKC,IAAI,CAACL,EACzB,CAAE,MAAOM,EAAO,CACZT,QAAQC,GAAG,CAAC,iBACZD,QAAQC,GAAG,CAACQ,EAChB,CACA,GCJI,aANkBC,GAMY,mBAAOC,EAAcC,OAAO,CAE5Df,EAAsBc,EAAcC,OAAO,CACT,YAAzB,OATWF,GAWpBb,CAAAA,EAXoBa,CAWE,EAGxB,IAAMG,EAAaF,EAAcG,MAAM,EAAI,GAMrCA,EAAS,CACb,GAAGD,CAAU,CACbE,IAAK,CACH,GAAGF,EAAWE,GAAG,CACjBC,iBAAkB,EACtB,CACA,EAEIC,EAAiBpB,EAMjBoB,GACFA,CAAAA,EAAiBC,EAAAC,wBAA+B,CAACF,EAAgB,eAAc,EAG5E,IAACG,EAAmBH,EC7CzBI,EAAe,GAAAC,EAAAC,CAAA,EAAMC,EAAQ,WAEhBC,EAAS,GAAAH,EAAAC,CAAA,EAAMC,EAAQ,UAE7BE,EAAA,IAAwBC,EAAAC,mBAAmB,EAClDC,WAAA,CACAC,KAAcC,EAAAC,CAAS,CAAAC,SAAA,CACvBC,KAAA,eACAC,SAAA,eAEAC,WAAA,GACAC,SAAA,EACA,EACAC,SAAYd,CACZ,qCElBA,IAAMe,EAAO,GAAIC,CDFiBpD,QAAA,OCEjBoD,IAAIA,CAAC,CACpBC,KAAMC,QAAQC,GAAG,CAACC,OAAO,CACzBC,SAAUH,QAAQC,GAAG,CAACG,OAAO,CAC7BC,KAAML,QAAQC,GAAG,CAACK,MAAM,CACxBC,KAAMP,QAAQC,GAAG,CAACO,OAAO,CACzBC,SAAUT,QAAQC,GAAG,CAACS,OAAO,CAE7BC,IAAK,GACLC,kBAAmB,IACnBC,wBAAyB,GAC3B,GAGAhB,EAAKiB,EAAE,CAAC,QAAS,CAACC,EAAKC,KACrB1D,QAAQS,KAAK,CAAC,kCAAmCgD,EACnD,GAGA,IAAAE,EAAepB,qBCVfqB,EANAvE,OAAAC,cAAA,CAAAH,EAAA,IAA4C,CAC5CI,WAAA,GACAC,IAAA,WACA,OAAAoE,CACA,CACA,GAEA,SAAAA,CAAA,EAGAA,EAAA,cAGAA,EAAA,sBAIAA,EAAA,oBAIAA,EAAA,qBACA,EAACA,GAAAA,CAAAA,EAAA,sBCjBO1E,EAAAC,OAAA,CAAA0E,EAAA","sources":["webpack://hockey/external commonjs \"@sentry/nextjs\"","webpack://hockey/external commonjs \"next/dist/compiled/next-server/pages-api.runtime.prod.js\"","webpack://hockey/./node_modules/next/dist/build/templates/helpers.js?d0a3","webpack://hockey/pages/api/players/index.js","webpack://hockey/sentry-wrapper-module","webpack://hockey/?baa2","webpack://hockey/external commonjs \"pg\"","webpack://hockey/./lib/db.js","webpack://hockey/./node_modules/next/dist/server/future/route-kind.js?3015","webpack://hockey/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js"],"sourcesContent":["module.exports = require(\"@sentry/nextjs\");","module.exports = require(\"next/dist/compiled/next-server/pages-api.runtime.prod.js\");","/**\n * Hoists a name from a module or promised module.\n *\n * @param module the module to hoist the name from\n * @param name the name to hoist\n * @returns the value on the module (or promised module)\n */ \"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nObject.defineProperty(exports, \"hoist\", {\n    enumerable: true,\n    get: function() {\n        return hoist;\n    }\n});\nfunction hoist(module, name) {\n    // If the name is available in the module, return it.\n    if (name in module) {\n        return module[name];\n    }\n    // If a property called `then` exists, assume it's a promise and\n    // return a promise that resolves to the name.\n    if (\"then\" in module && typeof module.then === \"function\") {\n        return module.then((mod)=>hoist(mod, name));\n    }\n    // If we're trying to hoise the default export, and the module is a function,\n    // return the module itself.\n    if (typeof module === \"function\" && name === \"default\") {\n        return module;\n    }\n    // Otherwise, return undefined.\n    return undefined;\n}\n\n//# sourceMappingURL=helpers.js.map","import conn from '../../../lib/db'\n\nexport default async function handler(req, res) {\nconsole.log('whwhhwhwhwhhwhwhw');\ntry {\n    \n    const sql = `\n    SELECT     ROW_NUMBER() OVER (ORDER BY ps.\"stat.points\" DESC NULLS LAST, ps.\"stat.goals\" DESC NULLS LAST) AS row_number,\n    p.\"fullName\", p.id, p.\"primaryPosition.code\", ps.\"season\", ps.\"team.name\", ps.\"stat.goals\", ps.\"stat.games\",ps.\"stat.assists\", ps.\"stat.points\", ps.\"team.id\"\n    FROM staging1.player_stats_new ps\n    INNER JOIN staging1.player p\n    ON p.id = ps.\"person.id\" AND p.active = true AND ps.season = 20222023\n    WHERE ps.\"league.id\" = 133\n    ORDER BY ps.\"stat.points\" DESC NULLS LAST,ps.\"stat.goals\" DESC NULLS LAST\n    LIMIT 200\n    `\n    let result = await conn.query(sql)\n    result = result.rows\n    res.status(200).json(result)\n} catch (error) {\n    console.log('errrrrrroooor');\n    console.log(error);\n}\n}","import * as serverComponentModule from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nexport * from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nimport * as Sentry from '@sentry/nextjs';\n\n/*\n * This file is a template for the code which will be substituted when our webpack loader handles API files in the\n * `pages/` directory.\n *\n * We use `__SENTRY_WRAPPING_TARGET_FILE__.cjs` as a placeholder for the path to the file being wrapped. Because it's not a real package,\n * this causes both TS and ESLint to complain, hence the pragma comments below.\n */\n\n\nconst userApiModule = serverComponentModule ;\n\n// Default to undefined. It's possible for Next.js users to not define any exports/handlers in an API route. If that is\n// the case Next.js will crash during runtime but the Sentry SDK should definitely not crash so we need to handle it.\nlet userProvidedHandler = undefined;\n\nif ('default' in userApiModule && typeof userApiModule.default === 'function') {\n  // Handle when user defines via ESM export: `export default myFunction;`\n  userProvidedHandler = userApiModule.default;\n} else if (typeof userApiModule === 'function') {\n  // Handle when user defines via CJS export: \"module.exports = myFunction;\"\n  userProvidedHandler = userApiModule;\n}\n\nconst origConfig = userApiModule.config || {};\n\n// Setting `externalResolver` to `true` prevents nextjs from throwing a warning in dev about API routes resolving\n// without sending a response. It's a false positive (a response is sent, but only after we flush our send queue), and\n// we throw a warning of our own to tell folks that, but it's better if we just don't have to deal with it in the first\n// place.\nconst config = {\n  ...origConfig,\n  api: {\n    ...origConfig.api,\n    externalResolver: true,\n  },\n};\n\nlet wrappedHandler = userProvidedHandler;\n\nif (wrappedHandler && undefined) {\n  wrappedHandler = Sentry.wrapApiHandlerWithSentryVercelCrons(wrappedHandler, undefined);\n}\n\nif (wrappedHandler) {\n  wrappedHandler = Sentry.wrapApiHandlerWithSentry(wrappedHandler, '/api/players');\n}\n\nconst wrappedHandler$1 = wrappedHandler;\n\nexport { config, wrappedHandler$1 as default };\n","import { PagesAPIRouteModule } from \"next/dist/server/future/route-modules/pages-api/module.compiled\";\nimport { RouteKind } from \"next/dist/server/future/route-kind\";\nimport { hoist } from \"next/dist/build/templates/helpers\";\n// Import the userland code.\nimport * as userland from \"private-next-pages/api/players/index.js\";\n// Re-export the handler (should be the default export).\nexport default hoist(userland, \"default\");\n// Re-export config.\nexport const config = hoist(userland, \"config\");\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesAPIRouteModule({\n    definition: {\n        kind: RouteKind.PAGES_API,\n        page: \"/api/players\",\n        pathname: \"/api/players\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland\n});\n\n//# sourceMappingURL=pages-api.js.map","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"pg\");","import {Pool} from \"pg\";\n\nconst pool = new Pool({\n  user: process.env.DB_USER,\n  password: process.env.DB_PASS,\n  host: process.env.DB_URL,\n  port: process.env.DB_PORT, // Changed from PORT which might conflict with Next.js\n  database: process.env.DB_NAME,\n  // Add some connection management settings\n  max: 30, // maximum number of clients in pool\n  idleTimeoutMillis: 30000,\n  connectionTimeoutMillis: 8000,\n});\n\n// Add error handling\npool.on(\"error\", (err, client) => {\n  console.error(\"Unexpected error on idle client\", err);\n});\n\n// Export the pool directly\nexport default pool;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nObject.defineProperty(exports, \"RouteKind\", {\n    enumerable: true,\n    get: function() {\n        return RouteKind;\n    }\n});\nvar RouteKind;\n(function(RouteKind) {\n    /**\n   * `PAGES` represents all the React pages that are under `pages/`.\n   */ RouteKind[\"PAGES\"] = \"PAGES\";\n    /**\n   * `PAGES_API` represents all the API routes under `pages/api/`.\n   */ RouteKind[\"PAGES_API\"] = \"PAGES_API\";\n    /**\n   * `APP_PAGE` represents all the React pages that are under `app/` with the\n   * filename of `page.{j,t}s{,x}`.\n   */ RouteKind[\"APP_PAGE\"] = \"APP_PAGE\";\n    /**\n   * `APP_ROUTE` represents all the API routes and metadata routes that are under `app/` with the\n   * filename of `route.{j,t}s{,x}`.\n   */ RouteKind[\"APP_ROUTE\"] = \"APP_ROUTE\";\n})(RouteKind || (RouteKind = {}));\n\n//# sourceMappingURL=route-kind.js.map","\"use strict\";\nif (process.env.NEXT_RUNTIME === \"edge\") {\n    module.exports = require(\"next/dist/server/future/route-modules/pages-api/module.js\");\n} else {\n    if (process.env.NODE_ENV === \"development\") {\n        module.exports = require(\"next/dist/compiled/next-server/pages-api.runtime.dev.js\");\n    } else if (process.env.TURBOPACK) {\n        module.exports = require(\"next/dist/compiled/next-server/pages-api-turbo.runtime.prod.js\");\n    } else {\n        module.exports = require(\"next/dist/compiled/next-server/pages-api.runtime.prod.js\");\n    }\n}\n\n//# sourceMappingURL=module.compiled.js.map"],"names":["module","exports","require","Object","defineProperty","enumerable","get","hoist","name","then","mod","userProvidedHandler","req","res","console","log","sql","result","conn","query","rows","status","json","error","serverComponentModule","userApiModule","default","origConfig","config","api","externalResolver","wrappedHandler","nextjs_","wrapApiHandlerWithSentry","wrappedHandler$1","next_route_loaderkind_PAGES_API_page_2Fapi_2Fplayers_preferredRegion_absolutePagePath_private_next_pages_2Fapi_2Fplayers_2Findex_js_middlewareConfigBase64_e30_3D_","helpers","l","players_namespaceObject","next_route_loaderkind_PAGES_API_page_2Fapi_2Fplayers_preferredRegion_absolutePagePath_private_next_pages_2Fapi_2Fplayers_2Findex_js_middlewareConfigBase64_e30_3D_config","routeModule","module_compiled","PagesAPIRouteModule","definition","kind","route_kind","x","PAGES_API","page","pathname","bundlePath","filename","userland","pool","Pool","user","process","env","DB_USER","password","DB_PASS","host","DB_URL","port","DB_PORT","database","DB_NAME","max","idleTimeoutMillis","connectionTimeoutMillis","on","err","client","db","RouteKind","__webpack_require__"],"sourceRoot":""}